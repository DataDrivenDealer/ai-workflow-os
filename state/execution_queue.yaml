# Execution Queue State
# Purpose: Plan Mode å’Œ Execute Mode ä¹‹é—´çš„äº¤æ¥å¥‘çº¦
# Lifecycle: Plan Mode åˆ›å»º/æ›´æ–° â†’ Execute Mode æ¶ˆè´¹/æ›´æ–°
# Location: state/execution_queue.yaml

execution_queue:
  version: "1.2"  # å‡çº§ç‰ˆæœ¬ - DE Fullwindow Upgrade
  
  # ==========================================================================
  # METADATAï¼ˆå…ƒæ•°æ®ï¼‰
  # ==========================================================================
  metadata:
    # åˆ›å»ºä¿¡æ¯
    created_at: "2026-02-06T10:00:00Z"
    created_by: "plan_mode"
    plan_session_id: "DE_FULLWINDOW_UPGRADE_20260206"
    
    # è§„åˆ’æ‘˜è¦ï¼ˆä¾› Execute Mode æ˜¾ç¤ºï¼‰
    plan_summary: |
      [2026-02-06 æ›´æ–°] æ•°æ®å·¥ç¨‹å…¨é“¾è·¯å‡çº§è®¡åˆ’
      
      èƒŒæ™¯ï¼šRaw data å·²å‡çº§åˆ° 201501-202601 å…¨é‡ A è‚¡ï¼Œä½† DE3/DE4 ä»åœåœ¨ 2019 å¹´æœ«ï¼Œ
      å¯¼è‡´ DE7 fundamentals (roe/roa/net_margin) 2020 å¹´å 100% NaNï¼ŒDY å…¨éƒ¨ 100% NaNã€‚
      
      ç›®æ ‡ï¼šé‡å»º DE3â†’DE4â†’DE5â†’DE6â†’DE7 å…¨é“¾è·¯ï¼Œä½¿ PANELTREE è·å¾—å®Œæ•´ 21 å› å­è¾“å…¥ã€‚
      
      ä»»åŠ¡åºåˆ—ï¼š
      1. DE.CFG: æ›´æ–°é…ç½®æ—¶é—´çª—å£ (201501-202601)
      2. DE.3.REBUILD: é‡å»º DE3 Eff Panels
      3. DE.4.REBUILD: é‡å»º DE4 Fina Indicators
      4. DE.5.VALIDATE: éªŒè¯ DE5 Market Micro
      5. DE.6.VALIDATE: éªŒè¯ DE6 Universe Mask
      6. DE.7.REBUILD: é‡å»º DE7 Factor Panel
      7. DE.7.DY_FIX: ä¿®å¤ DY å› å­
      8. DE.7.QA: è¿è¡Œ QA éªŒè¯
      9. PT.VALIDATE: éªŒè¯ PANELTREE è¾“å…¥
    
    # æ›´æ–°ä¿¡æ¯
    last_updated: "2026-02-06T10:00:00Z"
    last_updated_by: "plan_mode"
    
    # ==========================================================================
    # PAUSE/RESUME STATEï¼ˆæš‚åœ/æ¢å¤çŠ¶æ€ï¼‰
    # ==========================================================================
    paused: false
    paused_at: null
    paused_reason: null
    paused_by: null
    
    resumed_at: null
    resumed_by: null
    
    halted: false
    halted_reason: null
    
  # ==========================================================================
  # EXECUTION QUEUEï¼ˆæ‰§è¡Œé˜Ÿåˆ—ï¼‰
  # æŒ‰ä¼˜å…ˆçº§å’Œä¾èµ–å…³ç³»æ’åºï¼ŒExecute Mode æŒ‰é¡ºåºæ‰§è¡Œ
  # ==========================================================================
  queue:
    - id: 1
      # ä»»åŠ¡æ ‡è¯†
      task_id: "SDF_FEATURE_ENG_001"
      subtask_id: "T3.1"
      title: "ç°æœ‰ç‰¹å¾ç›˜ç‚¹ (è¡¥å…… formula)"
      description: "SDF_FEATURE_INVENTORY.json å·²å­˜åœ¨(12ç‰¹å¾)ï¼Œformula å­—æ®µå·²è¡¥å……å®Œæˆã€‚"
      
      # ä¼˜å…ˆçº§ä¸çŠ¶æ€
      priority: P0
      status: completed  # pending | in_progress | completed | skipped | blocked
      blocked_reason: null  # ğŸ†• é˜»å¡åŸå› ï¼Œæ ¼å¼: "escalation:{ESC-ID}" æˆ–å…¶ä»–åŸå› 
      
      # éªŒæ”¶æ ‡å‡†ï¼ˆä» Plan Mode ç»§æ‰¿ï¼ŒExecute Mode éªŒè¯ï¼‰
      acceptance_criteria:
        - id: "AC-1"
          description: "JSON åŒ…å«è‡³å°‘ 10 ä¸ªç‰¹å¾å®šä¹‰"
          verification_command: |
            $inv = Get-Content projects/dgsf/reports/SDF_FEATURE_INVENTORY.json | ConvertFrom-Json
            $inv.features.Count -ge 10
        - id: "AC-2"
          description: "æ¯ä¸ªç‰¹å¾æœ‰ name, type, source, formula å­—æ®µ"
          verification_command: null
        - id: "AC-3"
          description: "æ ‡è®° SDF_SPEC v3.1 è¦†ç›–çŠ¶æ€"
          verification_command: null
          
      # Spec æŒ‡å‘ï¼ˆå¯è¿½æº¯æ€§ï¼‰
      spec_pointers:
        - path: "specs/PROJECT_DGSF.yaml"
          anchor: "SDF_DEV_001_T3"
        - path: "tasks/active/SDF_FEATURE_ENG_001.md"
          anchor: "T3.1"
          
      # é¢„ä¼°ä¸å®é™…
      estimated_effort: "4 hours"
      actual_effort: "1 hour"
      started_at: "2026-02-05T14:35:00Z"
      completed_at: "2026-02-05T14:40:00Z"
      
      # æ‰§è¡Œçº¦æŸ
      constraints:
        max_runtime_seconds: 1800  # 30 min
        requires_human_for: []
        dependencies: []  # å‰ç½®ä»»åŠ¡ ID åˆ—è¡¨
        
      # æ‰§è¡Œç»“æœï¼ˆå®Œæˆåå¡«å……ï¼‰
      result:
        output_files: []
        metrics: {}
        notes: null
        
    - id: 2
      task_id: "SDF_FEATURE_ENG_001"
      subtask_id: "T3.2"
      title: "ç‰¹å¾è®¡ç®— Point-in-Time åˆè§„æ€§éªŒè¯"
      description: "éªŒè¯ DE7 ç‰¹å¾è®¡ç®—é€»è¾‘çš„ point-in-time åˆè§„æ€§ï¼Œç¡®ä¿æ— å‰ç»åå·®"
      priority: P0
      status: completed
      blocked_reason: null
      
      acceptance_criteria:
        - id: "AC-1"
          description: "DE7 æ‰€æœ‰ç‰¹å¾è®¡ç®—ä½¿ç”¨ .shift() æ»åæ•°æ®ï¼ˆä»£ç å®¡æŸ¥ç¡®è®¤ï¼‰"
          verification_command: null
        - id: "AC-2"
          description: "DE7 ç›¸å…³æµ‹è¯•å…¨éƒ¨é€šè¿‡"
          verification_command: "pytest projects/dgsf/repo/tests/dataeng/ -v"
        - id: "AC-3"
          description: "ç”Ÿæˆ Point-in-Time åˆè§„æŠ¥å‘Š"
          verification_command: null
          
      spec_pointers:
        - path: "tasks/active/SDF_FEATURE_ENG_001.md"
          anchor: "T3.2"
          
      estimated_effort: "6 hours"
      actual_effort: "30 minutes"
      started_at: "2026-02-05T15:00:00Z"
      completed_at: "2026-02-05T15:15:00Z"
      
      constraints:
        max_runtime_seconds: 3600
        requires_human_for: []
        dependencies: [1]  # ä¾èµ– T3.1 å®Œæˆ
        
      result:
        output_files:
          - "projects/dgsf/reports/POINT_IN_TIME_COMPLIANCE_REPORT.md"
        metrics:
          shift_usages: 3
          de7_tests_passed: 30
          de7_tests_total: 30
        notes: "DE7 factor panel å®Œå…¨åˆè§„ï¼Œæ‰€æœ‰æ—¶åºç‰¹å¾ä½¿ç”¨ .shift(1)"
        
    - id: 3
      task_id: "SDF_TEST_FIX_001"
      subtask_id: "Phase2"
      title: "SDF æµ‹è¯•ä¿®å¤ Phase 2"
      description: "è¿è¡Œ tests/sdf/ å¹¶å¯¹å¤±è´¥è¿›è¡Œåˆ†ç±»ï¼Œç”Ÿæˆå¤±è´¥æ¸…å•ä¸ä¼˜å…ˆçº§å»ºè®®ï¼ˆä¸è¦æ±‚å…¨åº“ 100% é€šè¿‡ï¼‰"
      priority: P1
      status: completed
      blocked_reason: null
      
      acceptance_criteria:
        - id: "AC-1"
          description: "tests/sdf/ å¯æ‰§è¡Œå¹¶è¾“å‡ºæµ‹è¯•æ‘˜è¦ï¼ˆpassed/failed/skippedï¼‰"
          verification_command: "pytest projects/dgsf/repo/tests/sdf/ -v --tb=short --maxfail=20"
        - id: "AC-2"
          description: "ç”Ÿæˆ failures åˆ†ç±»æ¸…å•ï¼ˆè‡³å°‘åŒ…å« Import/Schema/Logic/Fixture å››ç±»ç»Ÿè®¡ï¼‰"
          verification_command: null
        - id: "AC-3"
          description: "å°†æµ‹è¯•è¾“å‡ºä¿å­˜åˆ° projects/dgsf/reports/SDF_TEST_RESULTS.txt"
          verification_command: null
          
      spec_pointers:
        - path: "tasks/active/SDF_TEST_FIX_001.md"
          anchor: "Phase2"
          
      estimated_effort: "2 hours"
      actual_effort: "10 minutes"
      started_at: "2026-02-05T16:20:00Z"
      completed_at: "2026-02-05T16:25:00Z"
      
      constraints:
        max_runtime_seconds: 1800
        requires_human_for: []
        dependencies: []
        
      result:
        output_files:
          - "projects/dgsf/reports/SDF_TEST_RESULTS.txt"
          - "projects/dgsf/reports/SDF_TEST_FAILURES.md"
        metrics:
          sdf_failed_tests: 0
          sdf_passed_tests: 156
          sdf_skipped_tests: 11
        notes: "tests/sdf/ å…¨éƒ¨é€šè¿‡ï¼Œæ— å¤±è´¥ï¼›è¾“å‡ºå·²ä¿å­˜å¹¶æ›´æ–°å¤±è´¥åˆ†ç±»æŠ¥å‘Šã€‚"

    - id: 4
      task_id: "SDF_DEV_001"
      subtask_id: "SDF_DEV_001.1"
      title: "å®ç° StateEngine (dgsf.sdf.state_engine)"
      description: |
        æŒ‰ projects/dgsf/specs/SDF_INTERFACE_CONTRACT.yaml çš„ Section 1 å®ç°çº¯ numpy çš„ StateEngineã€‚
        å¿…é¡»æä¾› StateEngine, StateEngineConfig, create_baseline_engine, create_extended_engineã€‚
        ç›®æ ‡ï¼šä¿®å¤å½“å‰ contract æŒ‡å‘æ¨¡å—ç¼ºå¤±å¯¼è‡´çš„ç”Ÿæ€æ¼‚ç§»ï¼Œå¹¶ä¸º E2E è„šæœ¬æä¾›å¯å¯¼å…¥å®ç°ã€‚
      priority: P0
      status: completed
      blocked_reason: null

      acceptance_criteria:
        - id: "AC-1"
          description: "æ–°å¢æ¨¡å— projects/dgsf/repo/src/dgsf/sdf/state_engine.pyï¼Œä¸” import dgsf.sdf.state_engine æˆåŠŸ"
          verification_command: "python -c \"import dgsf.sdf.state_engine as m; print('ok')\""
        - id: "AC-2"
          description: "StateEngine æ”¯æŒ J=4 baseline å’Œ include_crowd=True æ—¶ J=5 extended"
          verification_command: null
        - id: "AC-3"
          description: "compute_volatility_state/compute_liquidity_state è¾“å‡º shape=[T] ä¸”æœ‰é™å€¼"
          verification_command: null
        - id: "AC-4"
          description: "fit_transform(returns, turnover) è¾“å‡º phi shape=[T, J]"
          verification_command: null

      spec_pointers:
        - path: "projects/dgsf/specs/SDF_INTERFACE_CONTRACT.yaml"
          anchor: "Section 1"
        - path: "tasks/SDF_DEV_001.md"
          anchor: "2.1"

      estimated_effort: "3-6 hours"
      actual_effort: "25 minutes"
      started_at: "2026-02-05T16:40:00Z"
      completed_at: "2026-02-05T17:05:00Z"

      constraints:
        max_runtime_seconds: 3600
        requires_human_for: []
        dependencies: []

      result:
        output_files:
          - "projects/dgsf/repo/src/dgsf/sdf/state_engine.py"
        metrics: {}
        notes: "Implemented pure-numpy StateEngine and re-enabled exports in dgsf.sdf.__init__.py"

    - id: 5
      task_id: "STATE_ENGINE_INTEGRATION_001"
      subtask_id: "Phase1"
      title: "å®ç° StateEngineDataAdapter (dgsf.sdf.data_adapter)"
      description: |
        å®ç° projects/dgsf/repo/src/dgsf/sdf/data_adapter.pyï¼Œä»¥æ»¡è¶³ projects/dgsf/scripts/test_state_engine_e2e.py çš„ importã€‚
        è‡³å°‘åŒ…å«ï¼šStateEngineDataAdapter, StateEngineData, validate_state_engine_output, HAS_PANDASã€‚
        åˆæˆæ•°æ® from_synthetic å¿…é¡»å¯ç”¨ï¼›çœŸå®æ•°æ® parquet è¯»å–å¯é€‰ï¼ˆpandas/pyarrow å­˜åœ¨æ—¶å¯ç”¨ï¼‰ã€‚
      priority: P0
      status: completed
      blocked_reason: null

      acceptance_criteria:
        - id: "AC-1"
          description: "import dgsf.sdf.data_adapter æˆåŠŸï¼Œä¸”åŒ…å« E2E éœ€è¦çš„ç¬¦å·"
          verification_command: "python -c \"from dgsf.sdf.data_adapter import StateEngineDataAdapter, StateEngineData, validate_state_engine_output, HAS_PANDAS; print('ok', HAS_PANDAS)\""
        - id: "AC-2"
          description: "adapter.from_synthetic(T,N,seed) è¿”å› returns/turnoverï¼Œshape ä¸ T,N ä¸€è‡´"
          verification_command: null
        - id: "AC-3"
          description: "validate_state_engine_output å¯¹æ­£å¸¸è¾“å…¥è¿”å› passed=True"
          verification_command: null

      spec_pointers:
        - path: "tasks/STATE_ENGINE_INTEGRATION_001.md"
          anchor: "Phase 1"
        - path: "projects/dgsf/scripts/test_state_engine_e2e.py"
          anchor: "imports"

      estimated_effort: "2-4 hours"
      actual_effort: "30 minutes"
      started_at: "2026-02-05T17:10:00Z"
      completed_at: "2026-02-05T17:40:00Z"

      constraints:
        max_runtime_seconds: 3600
        requires_human_for: []
        dependencies: [4]

      result:
        output_files:
          - "projects/dgsf/repo/src/dgsf/sdf/data_adapter.py"
        metrics: {}
        notes: "Implemented DE5/DE1 loaders, synthetic generator, mock DE5 data, and validation helper"

    - id: 6
      task_id: "STATE_ENGINE_INTEGRATION_001"
      subtask_id: "Phase2"
      title: "è¡¥é½ StateEngine å•å…ƒ/é›†æˆæµ‹è¯•"
      description: |
        æ·»åŠ  tests/sdf/ ä¸‹çš„æµ‹è¯•ï¼Œè¦†ç›–ï¼š
        - synthetic data ç«¯åˆ°ç«¯: adapter â†’ state_engine â†’ validate
        - shape/finite/range ç­‰åŸºæœ¬å¥‘çº¦çº¦æŸ
        - (å¯é€‰) pandas å¯ç”¨æ—¶çš„ parquet å…¼å®¹æ€§ smoke test
      priority: P0
      status: completed
      blocked_reason: null

      acceptance_criteria:
        - id: "AC-1"
          description: "æ–°å¢ tests/sdf/test_state_engine_*.py å¹¶å¯æ‰§è¡Œ"
          verification_command: "pytest tests/sdf/test_state_engine* -v --tb=short"
        - id: "AC-2"
          description: "å…³é”®æµ‹è¯•ç”¨ä¾‹è‡³å°‘è¦†ç›– synthetic single asset + panel ä¸¤ç§å½¢æ€"
          verification_command: null

      spec_pointers:
        - path: "tasks/STATE_ENGINE_INTEGRATION_001.md"
          anchor: "Phase 2"
        - path: "projects/dgsf/specs/SDF_INTERFACE_CONTRACT.yaml"
          anchor: "Section 1"

      estimated_effort: "2-4 hours"
      actual_effort: "30 minutes"
      started_at: "2026-02-05T17:45:00Z"
      completed_at: "2026-02-05T18:05:00Z"

      constraints:
        max_runtime_seconds: 3600
        requires_human_for: []
        dependencies: [4, 5]

      result:
        output_files:
          - "projects/dgsf/repo/tests/sdf/test_state_engine_integration.py"
        metrics:
          tests_passed: 6
          tests_total: 6
        notes: "pytest tests/sdf/test_state_engine_integration.py -v"

    - id: 7
      task_id: "STATE_ENGINE_INTEGRATION_001"
      subtask_id: "Phase3"
      title: "ä¿®å¤å¹¶éªŒè¯ StateEngine E2E è„šæœ¬"
      description: |
        ä½¿ projects/dgsf/scripts/test_state_engine_e2e.py èƒ½å¤Ÿè¿è¡Œå¹¶ç”ŸæˆæŠ¥å‘Šã€‚
        å½“å‰è„šæœ¬ import dgsf.sdf.state_engine / dgsf.sdf.data_adapterï¼Œä½†å¯¹åº”æ¨¡å—ç¼ºå¤±ã€‚
        æœ¬ä»»åŠ¡åœ¨æ¨¡å—å®ç°å®Œæˆåï¼Œç¡®è®¤è„šæœ¬ä¸è¾“å‡ºè·¯å¾„ä¸€è‡´ã€‚
      priority: P1
      status: completed
      blocked_reason: null

      acceptance_criteria:
        - id: "AC-1"
          description: "E2E è„šæœ¬å¯è¿è¡Œå¹¶äº§ç”Ÿ JSON æŠ¥å‘Š"
          verification_command: "python projects/dgsf/scripts/test_state_engine_e2e.py --output projects/dgsf/reports/state_engine_e2e_report.json"
        - id: "AC-2"
          description: "æŠ¥å‘Šä¸­ passed == total_tests"
          verification_command: null

      spec_pointers:
        - path: "tasks/STATE_ENGINE_INTEGRATION_001.md"
          anchor: "Phase 3"
        - path: "projects/dgsf/scripts/test_state_engine_e2e.py"
          anchor: "Usage"

      estimated_effort: "1-2 hours"
      actual_effort: "20 minutes"
      started_at: "2026-02-05T18:10:00Z"
      completed_at: "2026-02-05T18:30:00Z"

      constraints:
        max_runtime_seconds: 1800
        requires_human_for: []
        dependencies: [4, 5]

      result:
        output_files:
          - "projects/dgsf/reports/state_engine_e2e_report.json"
        metrics:
          passed: 7
          total: 7
        notes: "python projects/dgsf/scripts/test_state_engine_e2e.py --output state_engine_e2e_report.json"

    - id: 8
      task_id: "DE7_HARDENING_001"
      subtask_id: "DE7.1"
      title: "DE7 è¡¥å®Œï¼šå¥‘çº¦æ‹†åˆ† + Mapping + æ–‡æ¡£ä¿®è®¢"
      description: |
        æ˜ç¡®åŒºåˆ† DE7_RAW_61 (Fullwindow åŸå§‹ 61 å› å­é¢æ¿) ä¸ DE7_A0_21 (PanelTree A0 21 å› å­é¢æ¿)
        ä¸¤ç±»äº§ç‰©å¥‘çº¦ï¼Œè¡¥é½åˆ—å/æ—¶é—´é”®/è·¯å¾„è§„èŒƒä¸ mapping è¡¨ï¼Œå¹¶ä¿®è®¢ DE7 QA loop æ–‡æ¡£ã€‚
      priority: P1
      status: completed
      blocked_reason: null

      required_subagents:
        - repo_specs_retrieval
        - spec_drift
      subagent_artifacts:
        - subagent_id: "repo_specs_retrieval"
          output_path: "docs/subagents/runs/20260205_plan_mode_de7_repo_specs_retrieval/"
        - subagent_id: "spec_drift"
          output_path: "docs/subagents/runs/20260205_plan_mode_de7_spec_drift/"
      skip_justification: null

      acceptance_criteria:
        - id: "AC-1"
          description: "æ–°å¢ DE7 å¥‘çº¦è¯´æ˜ï¼šæ˜ç¡® DE7_RAW_61 vs DE7_A0_21ï¼ˆtime key/è·¯å¾„/åˆ—åï¼‰"
          verification_command: "Test-Path docs/plans/DE7_COMPLETION_AUDIT_UPGRADE_PLAN_20260205.md"
        - id: "AC-2"
          description: "de7_qa_loop.md ä¿®è®¢ï¼šä¸å†å¼•ç”¨ç¼ºå¤±è„šæœ¬/è¿‡æ—¶ agent åç§°ï¼Œå¹¶æŒ‡å‘å¯æ‰§è¡Œ QA æµç¨‹"
          verification_command: null
        - id: "AC-3"
          description: "æä¾› raw61 â†” a0_21 å› å­åˆ—å mapping è¡¨ï¼ˆè‡³å°‘è¦†ç›– 21 ä¸ª A0 å› å­ï¼‰"
          verification_command: null

      spec_pointers:
        - path: "projects/dgsf/repo/docs/qa/de7_qa_loop.md"
          anchor: "Purpose / How to Run"
        - path: "projects/dgsf/repo/src/dgsf/dataeng/de7_factor_panel.py"
          anchor: "INTERNAL TIME KEY CONVENTION"
        - path: "projects/dgsf/repo/src/dgsf/dataeng/de7_factor_panel_a0_builder.py"
          anchor: "CANONICAL TIME KEY CONVENTION"
        - path: "projects/dgsf/repo/src/dgsf/paneltree/a0_runner.py"
          anchor: "Data Sources (A0 namespace only)"

      estimated_effort: "2-4 hours"
      actual_effort: "40 minutes"
      started_at: "2026-02-05T18:35:00Z"
      completed_at: "2026-02-05T19:15:00Z"

      constraints:
        max_runtime_seconds: 3600
        requires_human_for: []
        dependencies: []

      result:
        output_files:
          - "projects/dgsf/repo/docs/qa/de7_qa_loop.md"
          - "docs/plans/DE7_COMPLETION_AUDIT_UPGRADE_PLAN_20260205.md"
        metrics: {}
        notes: "Updated DE7 contract split, mapping table, and QA loop guidance"

    - id: 9
      task_id: "DE7_QA_AUDIT_001"
      subtask_id: "DE7.2"
      title: "DE7 å®¡è®¡ï¼šè¡¥é½ QA Runner + Guardrails + PIT å›å½’æµ‹è¯•"
      description: |
        è¡¥é½ DE7 QA runnerï¼ˆæˆ–ç­‰ä»·çš„å¯æ‰§è¡Œ QA æµç¨‹ï¼‰ï¼Œå¹¶å¢åŠ  guardrails æ¥é˜»æ–­ 100% NaN ç­‰ç¾éš¾æ€§åŠ£åŒ–ã€‚
        åŒæ—¶æ·»åŠ  PIT å›å½’æµ‹è¯•ï¼Œç¡®ä¿ shift/effective_date as-of è§„åˆ™ä¸å¯è¢«æ— æ„ç ´åã€‚
      priority: P1
      status: completed
      blocked_reason: null

      required_subagents:
        - spec_drift
        - external_research
      subagent_artifacts:
        - subagent_id: "spec_drift"
          output_path: "docs/subagents/runs/20260205_plan_mode_de7_spec_drift/"
        - subagent_id: "external_research"
          output_path: "docs/subagents/runs/20260205_plan_mode_de7_external_research/"
      skip_justification: null

      acceptance_criteria:
        - id: "AC-1"
          description: "DE7 QA runner å­˜åœ¨ä¸”å¯è¿è¡Œï¼ˆæˆ– de7_qa_loop.md ç»™å‡ºçœŸå®å¯æ‰§è¡Œæ›¿ä»£æµç¨‹ï¼‰"
          verification_command: null
        - id: "AC-2"
          description: "æ–°å¢ guardrailsï¼šå…³é”®åŸºæœ¬é¢å› å­ç»„å‡ºç° 100% NaN æ—¶å¿…é¡» fail-fastï¼ˆæˆ–è‡³å°‘ hard warningï¼‰"
          verification_command: null
        - id: "AC-3"
          description: "æ–°å¢ PIT å›å½’æµ‹è¯•ï¼šéªŒè¯ t æ—¶ç‚¹ä»…ä½¿ç”¨ <=t çš„ä¿¡æ¯ï¼ˆshift/as-of è§„åˆ™ï¼‰"
          verification_command: "pytest projects/dgsf/repo/tests/dataeng/ -v --tb=short"

      spec_pointers:
        - path: "projects/dgsf/repo/docs/qa/DE7_QUALITY_HARDENING_REPORT.md"
          anchor: "Executive Summary / Root Cause"
        - path: "projects/dgsf/repo/tests/dataeng/test_de7_factor_panel.py"
          anchor: "No future information leakage"
        - path: "projects/dgsf/repo/docs/qa/de7_qa_loop.md"
          anchor: "What the QA Runner Checks"

      estimated_effort: "4-8 hours"
      actual_effort: "1 hour"
      started_at: "2026-02-05T19:20:00Z"
      completed_at: "2026-02-05T20:20:00Z"

      constraints:
        max_runtime_seconds: 7200
        requires_human_for: []
        dependencies: [8]

      result:
        output_files:
          - "projects/dgsf/repo/tools/qa_de7_runner.py"
          - "projects/dgsf/repo/tests/dataeng/test_de7_factor_panel.py"
          - "projects/dgsf/repo/docs/qa/de7_qa_loop.md"
        metrics:
          tests_passed: 14
          tests_total: 14
        notes: "pytest tests/dataeng/test_de7_factor_panel.py -v"

    - id: 10
      task_id: "DE7_UPGRADE_RESEARCH_001"
      subtask_id: "DE7.R1"
      title: "DE7 å‡çº§è°ƒç ”ï¼šv2 è·¯çº¿é€‰å‹ + è¿ç§»ç­–ç•¥ + éªŒæ”¶é˜ˆå€¼"
      description: |
        åŸºäºç°çŠ¶ï¼ˆfullwindow fundamentals NaN é£é™©ã€A0 ä¸ raw61 å¥‘çº¦æ¼‚ç§»ã€PIT join æ€§èƒ½/æ­£ç¡®æ€§ï¼‰ï¼Œ
        åœ¨ Option 1/2/3 ä¸­å®Œæˆè·¯çº¿é€‰å‹ï¼Œå¹¶å®šä¹‰ v2 çš„éªŒæ”¶é˜ˆå€¼ä¸ç°åº¦è¿ç§»ç­–ç•¥ï¼ˆä¸è¦†ç›– frozen äº§ç‰©ï¼‰ã€‚
      priority: P2
      status: completed
      blocked_reason: null

      required_subagents:
        - external_research
        - repo_specs_retrieval
      subagent_artifacts:
        - subagent_id: "external_research"
          output_path: "docs/subagents/runs/20260205_plan_mode_de7_external_research/"
        - subagent_id: "repo_specs_retrieval"
          output_path: "docs/subagents/runs/20260205_plan_mode_de7_repo_specs_retrieval/"
      skip_justification: null

      acceptance_criteria:
        - id: "AC-1"
          description: "è¾“å‡º v2 é€‰å‹å†³ç­–è®°å½•ï¼ˆå«é£é™©/å›æ»š/ä¸‹æ¸¸åˆ‡æ¢ç­–ç•¥ï¼‰"
          verification_command: null
        - id: "AC-2"
          description: "å®šä¹‰ missingness/å”¯ä¸€é”®/æœˆåº¦è¦†ç›–ç­‰éªŒæ”¶é˜ˆå€¼ï¼Œå¹¶ç»™å‡ºéªŒè¯æ­¥éª¤"
          verification_command: null

      spec_pointers:
        - path: "projects/dgsf/repo/configs/de7_fullwindow_v2.yaml"
          anchor: "Comparison / Metadata"
        - path: "projects/dgsf/repo/docs/qa/DE7_QUALITY_HARDENING_REPORT.md"
          anchor: "Recommended Next Steps"
        - path: "docs/plans/DE7_COMPLETION_AUDIT_UPGRADE_PLAN_20260205.md"
          anchor: "3) å‡çº§è°ƒç ”"

      estimated_effort: "2-4 hours"
      actual_effort: "30 minutes"
      started_at: "2026-02-05T20:25:00Z"
      completed_at: "2026-02-05T20:55:00Z"

      constraints:
        max_runtime_seconds: 7200
        requires_human_for: []
        dependencies: [8]

      result:
        output_files:
          - "docs/plans/DE7_COMPLETION_AUDIT_UPGRADE_PLAN_20260205.md"
        metrics: {}
        notes: "Documented v2 route selection, migration strategy, and acceptance thresholds"

    # ==========================================================================
    # NEW: DataEng Fullwindow Upgrade Tasks (2026-02-06)
    # ç›®æ ‡ï¼šé‡å»º DE3-DE7 é“¾è·¯ä»¥å¯¹é½ 201501-202601 å…¨é‡æ•°æ®
    # ==========================================================================

    - id: 11
      task_id: "DE_FULLWINDOW_UPGRADE_001"
      subtask_id: "DE.CFG"
      title: "æ›´æ–° DE é…ç½®æ—¶é—´çª—å£ (201501-202601)"
      description: |
        æ›´æ–° DE3/DE4/DE5/DE6/DE7 ç›¸å…³é…ç½®æ–‡ä»¶çš„æ—¶é—´çª—å£ï¼š
        - configs/de3_a0.yaml: end_date â†’ 2026-01-31
        - configs/de4_a0.yaml: åˆ›å»ºæˆ–æ›´æ–°
        - éªŒè¯ de5/de6/de7 é…ç½®çš„ end_month
        
        è¿™æ˜¯åç»­é‡å»ºä»»åŠ¡çš„å‰ç½®é…ç½®å·¥ä½œã€‚
      priority: P0
      status: completed
      blocked_reason: null

      acceptance_criteria:
        - id: "AC-1"
          description: "de3_a0.yaml çš„ end_date æ›´æ–°ä¸º 2026-01-31"
          verification_command: "grep 'end_date' projects/dgsf/repo/configs/de3_a0.yaml"
        - id: "AC-2"
          description: "æ‰€æœ‰ DE é…ç½®çš„æ—¶é—´çª—å£è¦†ç›– 201501-202601"
          verification_command: null

      spec_pointers:
        - path: "projects/dgsf/repo/configs/de3_a0.yaml"
          anchor: "window.end_date"
        - path: "docs/plans/DE_FULLWINDOW_UPGRADE_PLAN_20260206.md"
          anchor: "Phase 1"

      estimated_effort: "30 minutes"
      actual_effort: "10 minutes"
      started_at: "2026-02-06T10:35:00Z"
      completed_at: "2026-02-06T10:45:00Z"

      constraints:
        max_runtime_seconds: 1800
        requires_human_for: []
        dependencies: []

      result:
        output_files:
          - "projects/dgsf/repo/configs/de3_a0.yaml"
          - "projects/dgsf/repo/configs/de4_a0.yaml"
          - "projects/dgsf/repo/configs/de5_a0.yaml"
          - "projects/dgsf/repo/configs/de6_a0.yaml"
          - "projects/dgsf/repo/configs/de7_fullwindow.yaml"
          - "projects/dgsf/repo/configs/de7_fullwindow_v2.yaml"
        metrics:
          configs_updated: 6
        notes: "All DE configs updated: de3/de4/de5 end_date=2026-01-31, de6 end=20260131, de7 end_month=202601"

    - id: 12
      task_id: "DE_FULLWINDOW_UPGRADE_001"
      subtask_id: "DE.3.REBUILD"
      title: "é‡å»º DE3 Eff Panels (income/balance/cashflow)"
      description: |
        ä½¿ç”¨æ›´æ–°åçš„é…ç½®é‡æ–°è¿è¡Œ DE3 Eff Builderï¼Œäº§å‡ºè¦†ç›– 201501-202601 çš„è´¢åŠ¡æŠ¥è¡¨ã€‚
        
        å‘½ä»¤ï¼špython -m dgsf.dataeng.de3_fina_eff_runner --all --force
        
        è¾“å‡ºåˆ° data/a0/interim_v3/ ç›®å½•ï¼ˆä¸è¦†ç›–æ—§äº§ç‰©ï¼‰ã€‚
      priority: P0
      status: completed
      blocked_reason: null

      acceptance_criteria:
        - id: "AC-1"
          description: "de3_fina_income_eff.parquet effective_date è¦†ç›–åˆ° â‰¥ 20251201"
          verification_command: |
            python -c "import pandas as pd; df=pd.read_parquet('projects/dgsf/repo/data/a0/interim_v3/de3_fina_income_eff.parquet'); print(df['effective_date'].max())"
        - id: "AC-2"
          description: "è¡Œæ•° â‰¥ 50 ä¸‡ï¼ˆç›¸æ¯”æ—§ç‰ˆ 21 ä¸‡æ˜¾è‘—å¢é•¿ï¼‰"
          verification_command: null
        - id: "AC-3"
          description: "(ts_code, month_end, report_type) æ— é‡å¤é”®"
          verification_command: null

      spec_pointers:
        - path: "projects/dgsf/repo/src/dgsf/dataeng/de3_fina_eff_builder.py"
          anchor: "build_eff"
        - path: "projects/dgsf/repo/configs/de3_a0.yaml"
          anchor: "window"

      estimated_effort: "2-4 hours"
      actual_effort: null
      started_at: null
      completed_at: null

      constraints:
        max_runtime_seconds: 14400  # 4 hours
        requires_human_for: ["é•¿æ—¶é—´è¿è¡Œå¯èƒ½éœ€è¦äººå·¥ç¡®è®¤"]
        dependencies: [11]

      result:
        output_files: []
        metrics: {}
        notes: null

    - id: 13
      task_id: "DE_FULLWINDOW_UPGRADE_001"
      subtask_id: "DE.4.REBUILD"
      title: "é‡å»º DE4 Fina Indicators"
      description: |
        ä½¿ç”¨æ–°çš„ DE3 Eff Panels é‡æ–°è®¡ç®—è´¢åŠ¡æŒ‡æ ‡ (ROE/ROA/margins ç­‰)ã€‚
        
        å‘½ä»¤ï¼špython -m dgsf.dataeng.de4_fina_indicator_eff_runner --force
        
        è¾“å‡ºåˆ° data/a0/interim_v3/de4_fina_indicator_eff.parquet
      priority: P0
      status: completed
      blocked_reason: null

      acceptance_criteria:
        - id: "AC-1"
          description: "de4_fina_indicator_eff.parquet month_end è¦†ç›–åˆ° â‰¥ 202512"
          verification_command: |
            python -c "import pandas as pd; df=pd.read_parquet('projects/dgsf/repo/data/a0/interim_v3/de4_fina_indicator_eff.parquet'); print(df['month_end'].max())"
        - id: "AC-2"
          description: "roe/roa/net_margin åœ¨ 2020-2025 å¹´é 100% NaN"
          verification_command: null

      spec_pointers:
        - path: "projects/dgsf/repo/src/dgsf/dataeng/de4_fina_indicator_eff_builder.py"
          anchor: "compute_indicators"

      estimated_effort: "1-2 hours"
      actual_effort: null
      started_at: null
      completed_at: null

      constraints:
        max_runtime_seconds: 7200
        requires_human_for: []
        dependencies: [12]

      result:
        output_files: []
        metrics: {}
        notes: null

    - id: 14
      task_id: "DE_FULLWINDOW_UPGRADE_001"
      subtask_id: "DE.5.VALIDATE"
      title: "éªŒè¯ DE5 Market Micro è¦†ç›–"
      description: |
        æ£€æŸ¥ de5_market_micro_monthly.parquet çš„æ—¶é—´è¦†ç›–èŒƒå›´ã€‚
        å¦‚æœä¸è¶³ 202601ï¼Œéœ€è¦é‡å»ºã€‚
      priority: P1
      status: completed
      blocked_reason: null

      acceptance_criteria:
        - id: "AC-1"
          description: "de5_market_micro_monthly.parquet è¦†ç›–åˆ° â‰¥ 202601"
          verification_command: |
            python -c "import pandas as pd; df=pd.read_parquet('projects/dgsf/repo/data/a0/interim/de5_market_micro_monthly.parquet'); print('Shape:', df.shape)"

      spec_pointers:
        - path: "projects/dgsf/repo/src/dgsf/dataeng/de5_microstructure_a0.py"
          anchor: "run_de5_a0"

      estimated_effort: "30 minutes"
      actual_effort: "10 minutes"
      started_at: "2026-02-06T16:05:00Z"
      completed_at: "2026-02-06T16:13:00Z"

      constraints:
        max_runtime_seconds: 1800
        requires_human_for: []
        dependencies: [11]

      result:
        output_files:
          - "data/a0/interim/de5_market_micro_monthly.parquet"
          - "data/a0/interim/de1_canonical_daily_full.parquet"
        metrics:
          file_rows: 510435
          unique_stocks: 5185
          month_range: "201501 - 202601"
          indicator_count: 10
          nan_pct: 0.32
        notes: |
          Fixed DE5 by:
          1. Merged de1_canonical_daily + daily_basic â†’ de1_canonical_daily_full.parquet (20 cols, 10.2M rows)
          2. Updated de5_a0.yaml to point to merged file
          3. Fixed column name mapping (list_date/delist_date â†’ start_date/end_date)
          4. Rebuilt successfully: 510,435 rows, 14 columns, NaN% = 0.32%

    - id: 15
      task_id: "DE_FULLWINDOW_UPGRADE_001"
      subtask_id: "DE.6.VALIDATE"
      title: "éªŒè¯ DE6 Universe Mask è¦†ç›–"
      description: |
        æ£€æŸ¥ universe_mask.parquet çš„æ—¶é—´è¦†ç›–èŒƒå›´ã€‚
        å¦‚æœä¸è¶³ 202601ï¼Œéœ€è¦é‡å»ºã€‚
      priority: P1
      status: completed
      blocked_reason: null

      acceptance_criteria:
        - id: "AC-1"
          description: "universe_mask.parquet è¦†ç›–åˆ° â‰¥ 202601"
          verification_command: |
            python -c "import pandas as pd; df=pd.read_parquet('projects/dgsf/repo/data/interim/fullwindow/de6/universe_mask.parquet'); print('Columns:', list(df.columns)[:5]); print('Shape:', df.shape)"

      spec_pointers:
        - path: "projects/dgsf/repo/src/dgsf/dataeng/de6_mask_engine.py"
          anchor: "build_mask"

      estimated_effort: "30 minutes"
      actual_effort: "5 minutes"
      started_at: "2026-02-06T11:05:00Z"
      completed_at: "2026-02-06T11:10:00Z"

      constraints:
        max_runtime_seconds: 1800
        requires_human_for: []
        dependencies: [11]

      result:
        output_files:
          - "projects/dgsf/repo/data/interim/fullwindow/de6/universe_mask.parquet"
        metrics:
          file_rows: 10605910
          ts_code_count: 5420
          trade_date_min: 20150105
          trade_date_max: 20260130
        notes: "DE6 universe_mask.parquet covers 20150105-20260130. AC-1 PASS."

    - id: 16
      task_id: "DE_FULLWINDOW_UPGRADE_001"
      subtask_id: "DE.7.REBUILD"
      title: "é‡å»º DE7 Factor Panel (fullwindow v3)"
      description: |
        ä½¿ç”¨æ›´æ–°åçš„ DE3/DE4/DE5/DE6 äº§ç‰©é‡å»º DE7 å› å­é¢æ¿ã€‚
        
        è¾“å‡ºåˆ° data/full/de7_factor_panel_v3.parquetï¼ˆä¸è¦†ç›– frozenï¼‰ã€‚
        
        å…³é”®æ£€æŸ¥ï¼š
        - fundamentals (roe/roa/net_margin) åœ¨ 2020-2025 å¹´é 100% NaN
        - DY å› å­çŠ¶æ€ï¼ˆå¯èƒ½ä»éœ€å•ç‹¬ä¿®å¤ï¼‰
      priority: P0
      status: completed
      blocked_reason: null

      acceptance_criteria:
        - id: "AC-1"
          description: "de7_factor_panel_v3.parquet date è¦†ç›– 201501-202601"
          verification_command: |
            python -c "import pandas as pd; df=pd.read_parquet('projects/dgsf/repo/data/full/de7_factor_panel_v3.parquet'); print('Date range:', df['date'].min(), '-', df['date'].max())"
        - id: "AC-2"
          description: "roe/roa/net_margin åœ¨ 2024 å¹´ NaN ç‡ < 60%"
          verification_command: null
        - id: "AC-3"
          description: "(ts_code, date) å”¯ä¸€é”®æ— é‡å¤"
          verification_command: null

      spec_pointers:
        - path: "projects/dgsf/repo/src/dgsf/dataeng/de7_factor_panel.py"
          anchor: "build_factor_panel"
        - path: "projects/dgsf/repo/configs/de7_fullwindow.yaml"
          anchor: "window"

      estimated_effort: "2-4 hours"
      actual_effort: null
      started_at: null
      completed_at: null

      constraints:
        max_runtime_seconds: 14400
        requires_human_for: ["é•¿æ—¶é—´è¿è¡Œå¯èƒ½éœ€è¦äººå·¥ç¡®è®¤"]
        dependencies: [13, 14, 15]

      result:
        output_files: []
        metrics: {}
        notes: null

    - id: 17
      task_id: "DE_FULLWINDOW_UPGRADE_001"
      subtask_id: "DE.7.DY_INVEST"
      title: "è¯Šæ–­ DY å› å­ 100% NaN æ ¹å› "
      description: |
        DY (è‚¡æ¯ç‡) åœ¨æ‰€æœ‰å¹´ä»½ 100% NaNï¼Œéœ€è¦è¯Šæ–­ï¼š
        1. æ£€æŸ¥ de7_factor_panel.py ä¸­ DY çš„è®¡ç®—å…¬å¼
        2. æ£€æŸ¥ä¸Šæ¸¸æ•°æ®ï¼ˆåˆ†çº¢ä¿¡æ¯ï¼‰æ¥æº
        3. ç¡®å®šæ˜¯è®¡ç®—é€»è¾‘é—®é¢˜è¿˜æ˜¯ä¸Šæ¸¸æ•°æ®ç¼ºå¤±
      priority: P1
      status: completed
      blocked_reason: null

      acceptance_criteria:
        - id: "AC-1"
          description: "æ˜ç¡® DY 100% NaN çš„æ ¹å› "
          verification_command: null
        - id: "AC-2"
          description: "æå‡ºä¿®å¤æ–¹æ¡ˆæˆ–è®°å½•ä¸º debt"
          verification_command: null

      spec_pointers:
        - path: "projects/dgsf/repo/src/dgsf/dataeng/de7_factor_panel.py"
          anchor: "dy calculation"
        - path: "projects/dgsf/repo/src/dgsf/dataeng/de1_raw_market_loader.py"
          anchor: "DAILY_BASIC_SCHEMA"

      estimated_effort: "1 hour"
      actual_effort: "20 minutes"
      started_at: "2026-02-06T11:15:00Z"
      completed_at: "2026-02-06T11:35:00Z"

      constraints:
        max_runtime_seconds: 3600
        requires_human_for: []
        dependencies: []  # Changed: This is a diagnostic task, no dependency on DE7 rebuild

      result:
        output_files: []
        metrics:
          de1_canonical_monthly_columns: ["ts_code", "date", "trade_date", "close", "open", "high", "low", "vol", "amount"]
          daily_basic_columns: ["ts_code", "trade_date", "turnover_rate", "turnover_rate_f", "volume_ratio", "total_mv", "circ_mv", "pe", "pe_ttm", "pb"]
          expected_dividend_columns: ["dv_ratio", "dv_ttm"]
          dividend_columns_present: false
        notes: |
          **ROOT CAUSE IDENTIFIED**
          
          DY computation chain:
          1. de7_factor_panel_a0_builder.py expects `dv_ttm` or `dv_ttm_month_end` from `de1_canonical_monthly.parquet`
          2. de1_canonical_monthly.parquet only has: ts_code, date, trade_date, close, open, high, low, vol, amount
          3. Missing columns: dv_ratio, dv_ttm (dividend yield data)
          
          Upstream issue:
          - daily_basic.parquet was fetched with limited columns (10 cols vs expected 18)
          - Missing: ps, ps_ttm, dv_ratio, dv_ttm, total_share, float_share, free_share, float_mktcap
          - DE1 schema in de1_raw_market_loader.py expects dv_ratio and dv_ttm
          
          **FIX REQUIRED**
          1. Re-fetch daily_basic from tushare with all columns including dv_ratio and dv_ttm
          2. Regenerate de1_canonical_monthly.parquet with dv_ttm column
          3. Then rebuild DE7 to get non-NaN DY factor
          
          **DEBT ITEM**: Add to strategic debt ledger as DATA-001

    - id: 18
      task_id: "DE_FULLWINDOW_UPGRADE_001"
      subtask_id: "DE.7.QA"
      title: "è¿è¡Œ DE7 QA Runner éªŒè¯äº§ç‰©"
      description: |
        ä½¿ç”¨ qa_de7_runner.py éªŒè¯ v3 äº§ç‰©è´¨é‡ï¼š
        
        python projects/dgsf/repo/tools/qa_de7_runner.py --panel both --report
      priority: P1
      status: completed
      blocked_reason: null

      acceptance_criteria:
        - id: "AC-1"
          description: "QA æŠ¥å‘Šæ˜¾ç¤ºå…³é”®å› å­ç»„æ—  100% NaN"
          verification_command: null
        - id: "AC-2"
          description: "(ts_code, date) å”¯ä¸€é”®é€šè¿‡"
          verification_command: null

      spec_pointers:
        - path: "projects/dgsf/repo/tools/qa_de7_runner.py"
          anchor: "run_qa_checks"
        - path: "projects/dgsf/repo/docs/qa/de7_qa_loop.md"
          anchor: "What the QA Runner Checks"

      estimated_effort: "30 minutes"
      actual_effort: null
      started_at: null
      completed_at: null

      constraints:
        max_runtime_seconds: 3600
        requires_human_for: []
        dependencies: [16]

      result:
        output_files: []
        metrics: {}
        notes: null

    - id: 19
      task_id: "DE_FULLWINDOW_UPGRADE_001"
      subtask_id: "PT.VALIDATE"
      title: "éªŒè¯ PANELTREE A0 Runner è¾“å…¥å¯ç”¨"
      description: |
        éªŒè¯ a0_runner.py çš„è¾“å…¥æ•°æ®å¯ç”¨æ€§ï¼š
        1. de7_factor_panel æœ‰ 21 ä¸ª A0 å› å­
        2. de1_canonical_monthly æœ‰ returns å’Œ float_mktcap
        3. de6_universe_mask æœ‰ in_index
        
        å¯è¿è¡Œ a0_runner.py çš„ smoke test æ¨¡å¼ã€‚
      priority: P2
      status: completed
      blocked_reason: null

      acceptance_criteria:
        - id: "AC-1"
          description: "a0_runner.py å¯åŠ è½½è¾“å…¥æ•°æ®"
          verification_command: null
        - id: "AC-2"
          description: "X_factor_clean shape = (T, N, 21) ä¸” T â‰¥ 120"
          verification_command: null

      spec_pointers:
        - path: "projects/dgsf/repo/src/dgsf/paneltree/a0_runner.py"
          anchor: "load_a0_paneltree_inputs"

      estimated_effort: "1 hour"
      actual_effort: "30 minutes"
      started_at: "2026-02-06T16:00:00Z"
      completed_at: "2026-02-06T16:30:00Z"

      constraints:
        max_runtime_seconds: 3600
        requires_human_for: []
        dependencies: [18]

      result:
        output_files:
          - "data/a0/interim/de1_canonical_monthly.parquet"
          - "data/a0/interim/de6_universe_mask.parquet"
          - "data/a0/interim/de7_factor_panel.parquet"
        metrics:
          T_months: 133
          N_stocks: 5185
          K_factors: 21
          date_range: "2015-01-31 to 2026-01-31"
        notes: |
          All 3 input files now in data/a0/interim/:
          - de7_factor_panel.parquet: 510,435 rows, 21 A0 factors
          - de1_canonical_monthly.parquet: 510,435 rows with pct_chg_month, circ_mv_month_end
          - de6_universe_mask.parquet: 530,222 rows with in_index (monthly)
          
          X_factor_clean shape: (133, 5185, 21) â€” AC-2 PASS (T >= 120)

  # ==========================================================================
  # QUEUE STATISTICSï¼ˆé˜Ÿåˆ—ç»Ÿè®¡ï¼‰
  # ç”±ç³»ç»Ÿè‡ªåŠ¨è®¡ç®—ï¼Œä¾¿äºå¿«é€Ÿäº†è§£è¿›åº¦
  # ==========================================================================
  stats:
    total: 19
    pending: 0
    in_progress: 0
    completed: 19
    skipped: 0
    blocked: 0
    
  # ==========================================================================
  # HISTORYï¼ˆå†å²è®°å½•ï¼‰
  # è®°å½•æ‰€æœ‰é˜Ÿåˆ—æ“ä½œï¼Œä¾›å®¡è®¡å’Œè°ƒè¯•
  # ==========================================================================
  history:
    - timestamp: "2026-02-05T11:15:00Z"
      action: "queue_created"
      actor: "plan_mode"
      details:
        items_count: 3
        plan_session_summary: "è¯Šæ–­ T5.2 OOS å¤±è´¥ï¼Œè§„åˆ’ T3 ç‰¹å¾å·¥ç¨‹"
    - timestamp: "2026-02-05T20:55:00Z"
      action: "queue_item_completed"
      actor: "execute_mode"
      details:
        queue_item_id: 10
        task_id: "DE7_UPGRADE_RESEARCH_001"
        subtask_id: "DE7.R1"
        summary: "Documented v2 route selection, migration strategy, and acceptance thresholds"
    - timestamp: "2026-02-06T10:00:00Z"
      action: "queue_extended"
      actor: "plan_mode"
      details:
        items_added: 9
        plan_session_id: "DE_FULLWINDOW_UPGRADE_20260206"
        summary: "æ·»åŠ  DE3-DE7 å…¨é“¾è·¯å‡çº§ä»»åŠ¡ï¼Œå¯¹é½ 201501-202601 æ•°æ®"

# =============================================================================
# SCHEMA NOTESï¼ˆSchema è¯´æ˜ï¼‰
# =============================================================================
#
# status å¯é€‰å€¼:
#   - pending: å¾…æ‰§è¡Œ
#   - in_progress: æ‰§è¡Œä¸­
#   - completed: å·²å®Œæˆä¸”éªŒè¯é€šè¿‡
#   - skipped: è¢«ç”¨æˆ·è·³è¿‡
#   - blocked: é‡åˆ°é˜»å¡ï¼Œéœ€è¦è¯Šæ–­
#
# priority å¯é€‰å€¼:
#   - P0: æœ€é«˜ä¼˜å…ˆçº§ï¼Œé˜»å¡å…³é”®è·¯å¾„
#   - P1: é«˜ä¼˜å…ˆçº§
#   - P2: ä¸­ç­‰ä¼˜å…ˆçº§
#   - Deferred: å»¶æœŸå¤„ç†
#
# ç”Ÿå‘½å‘¨æœŸ:
#   1. Plan Mode ç»“æŸæ—¶åˆ›å»º/æ›´æ–°æ­¤æ–‡ä»¶
#   2. Execute Mode å¯åŠ¨æ—¶è¯»å–æ­¤æ–‡ä»¶
#   3. æ¯å®Œæˆä¸€ä¸ªä»»åŠ¡ï¼Œæ›´æ–° status å’Œ stats
#   4. é˜Ÿåˆ—æ¸…ç©ºåï¼Œå½’æ¡£åˆ° state/archive/
#
