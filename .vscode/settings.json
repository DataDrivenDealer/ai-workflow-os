{
    // ===== Python 环境配置 =====
    "python.defaultInterpreterPath": "${workspaceFolder}/.venv/Scripts/python.exe",
    "python.terminal.activateEnvironment": true,
    "python.terminal.activateEnvInCurrentTerminal": true,
    "python.analysis.autoImportCompletions": true,

    // ===== 测试配置 =====
    "python.testing.pytestEnabled": true,
    "python.testing.pytestArgs": ["kernel/tests"],

    // ===== 代码格式化 =====
    "[python]": {
        "editor.defaultFormatter": "charliermarsh.ruff",
        "editor.formatOnSave": true,
        "editor.codeActionsOnSave": {
            "source.organizeImports": "explicit"
        },
        "editor.rulers": [120]
    },
    "[yaml]": {
        "editor.tabSize": 2,
        "editor.rulers": [120]
    },
    "[json]": {
        "editor.tabSize": 2
    },
    "[jsonc]": {
        "editor.tabSize": 2
    },

    // ===== 文件排除（隐藏构建产物和归档） =====
    "files.exclude": {
        "**/__pycache__": true,
        "**/.pytest_cache": true,
        "htmlcov": true,
        ".coverage": true,
        "**/*.pyc": true,
        "projects/dgsf/archive/legacy_dgsf_v1/.venv": true,
        "projects/dgsf/archive/legacy_dgsf_v1/.git": true,
        "archive": true
    },

    // ===== 搜索排除 =====
    "search.exclude": {
        "htmlcov": true,
        "**/__pycache__": true,
        "projects/dgsf/archive": true,
        "archive": true,
        "**/node_modules": true
    },

    // ===== 文件关联 =====
    "files.associations": {
        "*.yaml": "yaml",
        "*.prompt.md": "markdown"
    },

    // ===== YAML 验证 =====
    "yaml.validate": true,

    // ===== 终端配置 =====
    "terminal.integrated.env.windows": {
        "VIRTUAL_ENV": "${workspaceFolder}/.venv",
        "PATH": "${workspaceFolder}/.venv/Scripts;${env:PATH}"
    },

    // ===== 其他配置 =====
    "chat.tools.terminal.autoApprove": {
        "gh": true,
        "Get-Command": true,
        "New-Item": true,
        "Out-Null": true,
        "/^\\$root=\"E:\\\\AI Tools\\\\AI Workflow OS\"; \\$map=@\\(@\\(\"architecture_pack_index\\.md\",\"docs\\\\ARCHITECTURE_PACK_INDEX\\.md\"\\),@\\(\"arch_blueprint_master\\.md\",\"docs\\\\ARCH_BLUEPRINT_MASTER\\.mmd\"\\),@\\(\"spec_governance_model\\.md\",\"docs\\\\SPEC_GOVERNANCE_MODEL\\.mmd\"\\),@\\(\"spec_registry_schema\\.md\",\"docs\\\\SPEC_REGISTRY_SCHEMA\\.md\"\\),@\\(\"kernel_v_0_runtime_flow\\.md\",\"docs\\\\KERNEL_V0_RUNTIME_FLOW\\.mmd\"\\),@\\(\"task_state_machine\\.md\",\"docs\\\\TASK_STATE_MACHINE\\.mmd\"\\),@\\(\"project_delivery_pipeline\\.md\",\"docs\\\\PROJECT_DELIVERY_PIPELINE\\.mmd\"\\),@\\(\"interface_layer_map\\.md\",\"docs\\\\INTERFACE_LAYER_MAP\\.mmd\"\\),@\\(\"security_trust_boundary\\.md\",\"docs\\\\SECURITY_TRUST_BOUNDARY\\.mmd\"\\),@\\(\"blueprint_freeze_record\\.md\",\"docs\\\\BLUEPRINT_FREEZE_RECORD\\.md\"\\)\\); foreach\\(\\$pair in \\$map\\)\\{ \\$src=Join-Path \\$root \\$pair\\[0\\]; \\$dst=Join-Path \\$root \\$pair\\[1\\]; Copy-Item -LiteralPath \\$src -Destination \\$dst -Force \\}$/": {
            "approve": true,
            "matchCommandLine": true
        },
        "/^git -C \"E:\\\\AI Tools\\\\AI Workflow OS\" checkout -b feature/router-v0; git -C \"E:\\\\AI Tools\\\\AI Workflow OS\" add tasks/inbox/\\.gitkeep tasks/running/\\.gitkeep tasks/done/\\.gitkeep \\.github/ISSUE_TEMPLATE/task_request\\.yml scripts/router_intake\\.py \\.github/workflows/router_intake\\.yml; git -C \"E:\\\\AI Tools\\\\AI Workflow OS\" commit -m \"feat: router v0 \\(issue -> taskcard -> PR\\)\"; git -C \"E:\\\\AI Tools\\\\AI Workflow OS\" push -u origin feature/router-v0$/": {
            "approve": true,
            "matchCommandLine": true
        },
        "/^& \"E:/AI Tools/AI Workflow OS/\\.venv/Scripts/python\\.exe\" -m pip install PyYAML$/": {
            "approve": true,
            "matchCommandLine": true
        },
        "/^git -C \"E:\\\\AI Tools\\\\AI Workflow OS\" commit -m \"feat: router v0 \\(issue -> taskcard -> PR\\)\"; git -C \"E:\\\\AI Tools\\\\AI Workflow OS\" push -u origin feature/router-v0$/": {
            "approve": true,
            "matchCommandLine": true
        },
        "/^\\$env:PATH=\"E:\\\\AI Tools\\\\AI Workflow OS\\\\\\.venv\\\\Scripts;\\$env:PATH\"; git -C \"E:\\\\AI Tools\\\\AI Workflow OS\" commit -m \"feat: router v0 \\(issue -> taskcard -> PR\\)\"; git -C \"E:\\\\AI Tools\\\\AI Workflow OS\" push -u origin feature/router-v0$/": {
            "approve": true,
            "matchCommandLine": true
        },
        "/^where python$/": {
            "approve": true,
            "matchCommandLine": true
        }
    },
    "python-envs.pythonProjects": []
}